# Dami Orikogbo EC700 Sp '16
# extract all apk files Manifest.xml in a directory into a human readable
# xml file and saves in a new directory then
# runs python scripts that extract features from xml files
# and saves in "binary" csv format that is usable by ML platform


#MALWARE
# gets all xml files to human readable format in a directory
#for malware and prints file names(absolute directory path) to text file

#!/bin/bash

for names in $(find /data/androguard/samples -type f -name "*.apk")
do 
	file=$(basename "$names" .apk)
	echo "$names" >> pathname.txt
	./androaxml.py -i $names > /data/output/xml/malware/$file.xml

done



#BENIGN
# gets all xml files to human readable format in a directory
#for bening and prints file names(absolute directory path) to text file

for names in $(find /data/androguard/benignApps -type f -name "*.apk");
do
	file=$(basename "$names" .apk)
	echo "$names" >> pathname.txt
	./androaxml.py -i $names > /data/output/xml/benign/$file.xml
done

wait 


python binMal.py >> CombinedMalBen.csv

python binBen.py >> CombinedMalBen.csv
